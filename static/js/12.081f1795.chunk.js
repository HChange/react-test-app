(this["webpackJsonpreact-test-app"]=this["webpackJsonpreact-test-app"]||[]).push([[12],{166:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(188),o=n(21),i=n(39),s=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(0),u=Object(o.a)(s,2),d=u[0],l=u[1];r.a.useEffect((function(){for(var e=Number(new Date);Number(new Date)-e<=300;);0===n&&a(Math.random())}),[n]),r.a.useLayoutEffect((function(){for(var e=Number(new Date);Number(new Date)-e<=300;);0===d&&l(Math.random())}),[d]);var f=r.a.useCallback((function(){return a(0)}),[]),b=r.a.useCallback((function(){return l(0)}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:["useEffect: ",Object(i.jsx)("button",{onClick:f,children:n})]}),Object(i.jsxs)("div",{children:["useLayoutEffect: ",Object(i.jsx)("button",{onClick:b,children:d})]})]})};t.default=function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(a.Page,{backLine:{stepx:20,stepy:20},children:Object(i.jsx)(a.Block,{title:"useEffect&useLayoutEffect\u533a\u522b",children:Object(i.jsx)(a.CodeViewer,{render:Object(i.jsx)(s,{}),code:Object(i.jsx)(a.Marked,{children:"\n```JavaScript\nimport React, { useState } from 'react';\n\nconst index = () => {\n  const [count1, setCount1] = useState(0);\n  const [count2, setCount2] = useState(0);\n\n  React.useEffect(() => {\n    // \u8017\u65f6 300 \u6beb\u79d2\u7684\u8ba1\u7b97\n    const start = Number(new Date());\n    while (Number(new Date()) - start <= 300) {\n      continue;\n    }\n    if (count1 === 0) {\n      setCount1(Math.random());\n    }\n  }, [count1]);\n\n  React.useLayoutEffect(() => {\n    // \u8017\u65f6 300 \u6beb\u79d2\u7684\u8ba1\u7b97\n    const start = Number(new Date());\n    while (Number(new Date()) - start <= 300) {\n      continue;\n    }\n    if (count2 === 0) {\n      setCount2(Math.random());\n    }\n  }, [count2]);\n\n  const handleClick1 = React.useCallback(() => setCount1(0), []);\n  const handleClick2 = React.useCallback(() => setCount2(0), []);\n  return (\n    <div>\n      <div>\n        useEffect: <button onClick={handleClick1}>{count1}</button>\n      </div>\n\n      <div>\n        useLayoutEffect: <button onClick={handleClick2}>{count2}</button>\n      </div>\n    </div>\n  );\n};\n\nexport default index;\n\n```\n"})})})})})}},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(178),r=n(0),a=n(190),o=n.n(a),i=n(39),s=function(e){var t=e.children,n=Object(r.useRef)(null);return Object(i.jsxs)("h3",{id:t,className:o.a.title,ref:n,onClick:function(){n.current&&Object(c.b)(n.current)},children:[t,Object(i.jsx)("span",{className:o.a.icon,children:"#"})]})}},178:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var c=function(e){var t=e.canvas,n=e.color,c=e.stepx,r=e.stepy,a=e.lineWidth,o=void 0===a?.15:a,i=t.getContext("2d");if(i.save(),i.fillStyle="transparent",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.lineWidth=o,i.strokeStyle=n,c>0)for(var s=c;s<i.canvas.width;s+=c)i.beginPath(),i.moveTo(s,0),i.lineTo(s,i.canvas.height),i.closePath(),i.stroke();if(r>0)for(var u=r;u<i.canvas.height;u+=r)i.beginPath(),i.moveTo(0,u),i.lineTo(i.canvas.width,u),i.closePath(),i.stroke();i.restore()},r=function(e){e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},181:function(e,t,n){"use strict";n.d(t,"Block",(function(){return s}));n(0);var c=n(189),r=n.n(c),a=n(177),o=n(39),i=n(182);n.o(i,"CodeViewer")&&n.d(t,"CodeViewer",(function(){return i.CodeViewer})),n.o(i,"Marked")&&n.d(t,"Marked",(function(){return i.Marked})),n.o(i,"Page")&&n.d(t,"Page",(function(){return i.Page}));var s=function(e){var t=e.title,n=e.children;return Object(o.jsxs)("div",{className:r.a.block,children:[Object(o.jsx)(a.a,{children:t}),Object(o.jsx)("div",{className:r.a.block__content,children:n})]})}},182:function(e,t){},183:function(e,t,n){"use strict";n.d(t,"Page",(function(){return b}));var c=n(42),r=n(0),a=n(20),o=n(104),i=n(191),s=n.n(i),u=n(178),d=n(192),l=n(39),f=n(184);n.o(f,"Block")&&n.d(t,"Block",(function(){return f.Block})),n.o(f,"CodeViewer")&&n.d(t,"CodeViewer",(function(){return f.CodeViewer})),n.o(f,"Marked")&&n.d(t,"Marked",(function(){return f.Marked}));var b=function(e){var t=Object(a.e)().pathname,n=o.b.filter((function(e){return e.path===t}))[0].name,i=e.children,f=e.title,b=void 0===f?n:f,v=e.backLine,h=void 0===v||v,j=Object(r.useMemo)((function(){return"boolean"===typeof h?d.d:Object(c.a)(Object(c.a)({},d.d),h)}),[h]),_=j.color,p=j.stepx,w=j.stepy,O=j.lineWidth,k=Object(r.useRef)(null),m=Object(r.useRef)(null),x=Object(r.useRef)(null),C=Object(r.useRef)();return Object(r.useEffect)((function(){var e;return m.current&&h&&(e=new ResizeObserver((function(){C.current&&clearTimeout(C.current),setTimeout((function(){if(k.current&&x.current&&m.current){var e=m.current,t=e.clientHeight,n=e.clientWidth;if(t>d.a)return;x.current.style.height="".concat(t,"px"),k.current.style.width="".concat(n*d.b,"px"),k.current.style.height="".concat(t*d.b,"px"),k.current.width=n*d.c,k.current.height=t*d.c,Object(u.a)({canvas:k.current,color:_,stepx:p*d.e,stepy:w*d.e,lineWidth:O})}}),500)}))).observe(m.current),function(){var t,n;null===(t=e)||void 0===t||null===(n=t.disconnect)||void 0===n||n.call(t)}}),[k,m,h,x]),Object(l.jsx)("div",{className:s.a.wrapper,children:Object(l.jsxs)("div",{className:s.a.page,ref:m,children:[h&&Object(l.jsx)("div",{ref:x,className:s.a["canvas-wrapper"],children:Object(l.jsx)("canvas",{ref:k,className:s.a.canvas})}),Object(l.jsxs)("div",{className:s.a["page-content"],children:[Object(l.jsx)("h2",{className:s.a.title,children:b}),Object(l.jsx)("div",{className:s.a.content,children:i}),Object(l.jsx)("div",{className:s.a.footer})]})]})})}},184:function(e,t){},185:function(e,t,n){"use strict";n(178),n(0),n(39)},186:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(97),r=n(21),a=n(0),o=n(8),i=n.n(o),s=n(193),u=n.n(s),d=n(39),l=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),o=n[0],s=n[1],l=e.render,f=e.code;return Object(d.jsxs)("div",{className:u.a["code-viewer"],children:[Object(d.jsxs)("div",{className:u.a["code-viewer__render"],children:[l,Object(d.jsx)("span",{className:i()(u.a["code-viewer__show-btn"],Object(c.a)({},u.a["code-viewer__show-btn-open"],o)),onClick:function(){return s((function(e){return!e}))},children:o?"\u5173\u95ed\u4ee3\u7801":"\u5c55\u5f00\u4ee3\u7801"})]}),Object(d.jsx)("div",{className:i()(u.a["code-viewer__code"],Object(c.a)({},u.a["code-viewer__code-open"],o)),children:f})]})}},187:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var c=n(21),r=n(0),a=n(8),o=n.n(a),i=n(201),s=n.n(i),u=n(200),d=n.n(u),l=n(202),f=n.n(l),b=n(194),v=n.n(b),h=/^[\w\W]*?```([\w\W]*?)```[\w\W]*$/,j=n(39),_=function(e){var t=e.children,n=e.type,a=e.className,i=e.style,u=void 0===i?{}:i,l=e.onCopy,b=Object(r.useState)(""),_=Object(c.a)(b,2),p=_[0],w=_[1],O=Object(r.useState)(""),k=Object(c.a)(O,2),m=k[0],x=k[1],C=Object(r.useState)("\u590d\u5236"),g=Object(c.a)(C,2),N=g[0],y=g[1];Object(r.useEffect)((function(){if(t){var e;w((null===(e=t.match(h))||void 0===e?void 0:e[1])||""),s.a.setOptions({renderer:new s.a.Renderer,highlight:function(e){return'<pre class="hljs"><code>'+d.a.highlightAuto(e,n?[n]:void 0).value+"</code></pre>"},pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});var c=s()(t);x(c)}}),[t,n]);var M=Object(r.useCallback)((function(e,t){y("\u5df2\u590d\u5236"),setTimeout((function(){y("\u590d\u5236")}),2e3),l&&l(e,t)}),[]);return Object(j.jsx)("div",{className:o()(v.a.marked,{className:a}),style:u,children:Object(j.jsxs)("div",{className:o()(v.a["marked-content"]),children:[m&&Object(j.jsx)("div",{dangerouslySetInnerHTML:{__html:m}}),Object(j.jsx)(f.a,{text:p,onCopy:M,children:Object(j.jsx)("span",{className:v.a["marked-content__copy"],children:N})})]})})}},188:function(e,t,n){"use strict";var c=n(181);n.o(c,"Block")&&n.d(t,"Block",(function(){return c.Block})),n.o(c,"CodeViewer")&&n.d(t,"CodeViewer",(function(){return c.CodeViewer})),n.o(c,"Marked")&&n.d(t,"Marked",(function(){return c.Marked})),n.o(c,"Page")&&n.d(t,"Page",(function(){return c.Page}));var r=n(183);n.o(r,"Block")&&n.d(t,"Block",(function(){return r.Block})),n.o(r,"CodeViewer")&&n.d(t,"CodeViewer",(function(){return r.CodeViewer})),n.o(r,"Marked")&&n.d(t,"Marked",(function(){return r.Marked})),n.o(r,"Page")&&n.d(t,"Page",(function(){return r.Page}));n(177),n(185);var a=n(186);n.d(t,"CodeViewer",(function(){return a.a}));var o=n(187);n.d(t,"Marked",(function(){return o.a}))},189:function(e,t,n){e.exports={block__content:"block__content__2GD6O"}},190:function(e,t,n){e.exports={ellipsis:"ellipsis__322Eq",title:"title__2ZSyt",icon:"icon__3vdW5"}},191:function(e,t,n){e.exports={ellipsis:"ellipsis__2Uc9l",wrapper:"wrapper__3y9jD",page:"page__1k_bh","canvas-wrapper":"canvas-wrapper__2oIr1",canvas:"canvas__1HL9K","page-content":"page-content__1cWrh",title:"title__2iGTa",content:"content__5eCjz",footer:"footer__St2N1"}},192:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i}));var c=2,r=2,a=c/r,o={color:"red",stepx:20,stepy:20,lineWidth:.15},i=8e3},193:function(e,t,n){e.exports={ellipsis:"ellipsis__1ZCmY","code-viewer":"code-viewer__2677u","code-viewer__render":"code-viewer__render__1ViX4","code-viewer__show-btn":"code-viewer__show-btn__G5BQv","code-viewer__show-btn-open":"code-viewer__show-btn-open__3P1mA","code-viewer__code":"code-viewer__code__3eHnO","code-viewer__code-open":"code-viewer__code-open__1lUmt"}},194:function(e,t,n){e.exports={ellipsis:"ellipsis__26Fs5","marked-content":"marked-content__3cowg","marked-content__copy":"marked-content__copy__K55yV"}}}]);
//# sourceMappingURL=12.081f1795.chunk.js.map