{"version":3,"sources":["pages/virtuallist/data.ts","pages/virtuallist/index.tsx","components/Title/index.tsx","utils/drawGrid.ts","utils/scrollIntoView.ts","components/Block/index.tsx","components/Page/index.tsx","components/AnchorPoint/index.tsx","components/CodeViewer/index.tsx","components/Marked/constants.ts","components/Marked/index.tsx","components/index.ts","components/Block/index.less","components/Title/index.less","components/Page/index.less","components/Page/constants.ts","components/CodeViewer/index.less","components/Marked/index.less","pages/virtuallist/index.less"],"names":["Array","fill","map","id","Faker","datatype","uuid","avatar","title","name","firstName","content","company","companyName","VirtualList","useState","renderData","setRenderData","wrapperHeight","setWrapperHeight","startOffset","setStartOffset","start","setStart","virtualWrapper","useRef","virtual","visibleCount","useMemo","Math","ceil","end","renderHeight","length","visibleData","slice","min","useEffect","_data","wrapper","current","clientHeight","scrollEvent","useCallback","scrollTop","floor","dom","addEventListener","removeEventListener","className","styles","ref","style","height","max","transform","src","alt","Title","props","children","onClick","scrollIntoView","icon","drawGrid","params","canvas","color","stepx","stepy","lineWidth","context","getContext","save","fillStyle","fillRect","width","strokeStyle","i","beginPath","moveTo","lineTo","closePath","stroke","j","restore","behavior","block","inline","Block","Page","pathname","useLocation","defaultTitle","routes","filter","item","path","backLine","defaultConfig","page","canvasWrapper","timer","resizeObserver","ResizeObserver","clearTimeout","setTimeout","clientWidth","MAX_HEIGHT","canvasCurrentWidthMultiply","canvasWidthMultiply","gridWidthMultiply","observe","disconnect","footer","CodeViewer","isOpen","setIsOpen","render","code","classNames","prev","reg","Marked","type","onCopy","setCode","markContent","setMarkContent","copyText","setCopyText","match","marked","setOptions","renderer","Renderer","highlight","hljs","highlightAuto","undefined","value","pedantic","gfm","breaks","sanitize","smartLists","smartypants","xhtml","markedContentd","copyAction","text","result","classnames","dangerouslySetInnerHTML","__html","module","exports"],"mappings":"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","file":"static/js/8.59cd4f55.chunk.js","sourcesContent":["import Faker from 'faker';\n\nexport default new Array(1000).fill(true).map(() => ({\n  id: Faker.datatype.uuid(),\n  avatar: 'https://www.static.hellochange.cn/images/white_bear.gif',\n  title: Faker.name.firstName(),\n  content: Faker.company.companyName(),\n}));\n","import { Page } from '@/components';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport styles from './index.less';\nimport _data from './data';\n\nconst VirtualList = () => {\n  const [renderData, setRenderData] = useState<typeof _data>([]);\n  const [wrapperHeight, setWrapperHeight] = useState(0);\n  const [startOffset, setStartOffset] = useState(0);\n  const [start, setStart] = useState(0);\n  const itemHeight = 50;\n  const virtualWrapper = useRef<HTMLDivElement>(null);\n  const virtual = useRef<HTMLDivElement>(null);\n  const visibleCount = useMemo(() => Math.ceil(wrapperHeight / itemHeight), [wrapperHeight]);\n  const end = start + visibleCount;\n  // 已经更新的高度\n  const renderHeight = useMemo(() => renderData.length * itemHeight, [renderData]);\n\n  // 应该显示的列表数据\n  const visibleData = useMemo(() => renderData.slice(start, Math.min(end, renderData.length)), [\n    renderData,\n    start,\n    end,\n  ]);\n\n  useEffect(() => {\n    setRenderData(_data.slice(0, visibleCount));\n  }, [visibleCount]);\n\n  useEffect(() => {\n    const wrapper = virtualWrapper.current;\n    if (wrapper) {\n      setWrapperHeight(wrapper.clientHeight);\n    }\n  }, []);\n\n  const scrollEvent = useCallback(() => {\n    const scrollTop = virtualWrapper.current?.scrollTop ?? 0;\n    const start = Math.floor(scrollTop / itemHeight);\n    const end = start + visibleCount;\n    setStart(start);\n    if (end >= renderData.length) {\n      setRenderData(_data.slice(0, end + visibleCount));\n    }\n    setStartOffset(scrollTop);\n  }, [renderData, visibleCount]);\n\n  useEffect(() => {\n    let dom = virtualWrapper.current;\n    scrollEvent();\n    if (dom) {\n      dom.addEventListener('scroll', scrollEvent);\n    }\n    return () => {\n      if (dom) {\n        dom.removeEventListener('scroll', scrollEvent);\n      }\n    };\n  }, [scrollEvent]);\n\n  return (\n    <Page>\n      <div className={styles['virtual-list-wrapper']} ref={virtualWrapper}>\n        <div className={styles['virtual-list-phantom']} style={{ height: Math.max(renderHeight, wrapperHeight + 1) }} />\n        <div className={styles['virtual-list']} ref={virtual} style={{ transform: `translateY(${startOffset}px)` }}>\n          {visibleData.map(({ id, title, avatar, content }) => (\n            <div key={id} className={styles['virtual-list-item']}>\n              <img className={styles['virtual-list-item__avatar']} src={avatar} alt=\"\" />\n              <div className={styles['virtual-list-item__content']}>\n                <h3 className={styles['virtual-list-item__title']}>{title}</h3>\n                <div className={styles['virtual-list-item__desc']}>{content}</div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </Page>\n  );\n};\n\nexport default VirtualList;\n","import { scrollIntoView } from '@/utils';\nimport React, { useRef } from 'react';\nimport styles from './index.less';\n\nconst Title = (props: { children: string }) => {\n  const { children } = props;\n  const ref = useRef<HTMLHeadingElement>(null);\n\n  const scrollToTop = () => {\n    if (ref.current) {\n      scrollIntoView(ref.current);\n    }\n    if (process.env.REACT_APP_IS_GITHUB !== 'true') {\n      window.location.hash = children;\n    }\n  };\n\n  return (\n    <h3 id={children} className={styles.title} ref={ref} onClick={scrollToTop}>\n      {children}\n      <span className={styles.icon}>#</span>\n    </h3>\n  );\n};\n\nexport { Title };\n","/**\n * @description 网格绘画函数\n * @param canvas HTMLCanvasElement\n * @param color 线条颜色\n * @param stepx 横坐标间隔\n * @param stepy 纵坐标间隔\n * @param lineWidth 线条宽度\n */\ninterface Params {\n  canvas: HTMLCanvasElement;\n  color: any;\n  stepx: number;\n  stepy: number;\n  lineWidth?: number;\n}\nexport const drawGrid = (params: Params) => {\n  const { canvas, color, stepx, stepy, lineWidth = 0.15 } = params;\n  const context = canvas.getContext('2d')!;\n  context.save();\n  context.fillStyle = 'transparent';\n  context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n  context.lineWidth = lineWidth;\n  context.strokeStyle = color;\n  if (stepx > 0) {\n    for (let i = stepx; i < context.canvas.width; i += stepx) {\n      context.beginPath();\n      context.moveTo(i, 0);\n      context.lineTo(i, context.canvas.height);\n      context.closePath();\n      context.stroke();\n    }\n  }\n  if (stepy > 0) {\n    for (let j = stepy; j < context.canvas.height; j += stepy) {\n      context.beginPath();\n      context.moveTo(0, j);\n      context.lineTo(context.canvas.width, j);\n      context.closePath();\n      context.stroke();\n    }\n  }\n  context.restore();\n};\n","export const scrollIntoView = (dom: HTMLElement) => {\n  dom.scrollIntoView({\n    behavior: 'smooth',\n    block: 'start',\n    inline: 'nearest',\n  });\n};\n","import React from 'react';\nimport { BlockProps } from './types';\nimport styles from './index.less';\nimport { Title } from '../Title';\n\nconst Block = (props: BlockProps) => {\n  const { title, children } = props;\n  return (\n    <div className={styles.block}>\n      <Title>{title}</Title>\n      <div className={styles['block__content']}>{children}</div>\n    </div>\n  );\n};\n\nexport { Block };\nexport * from './types';\n","import React, { useEffect, useMemo, useRef } from 'react';\nimport { useLocation } from 'react-router';\nimport { routes } from '@/config/routes';\nimport styles from './index.less';\nimport { PageProps } from './types';\nimport { drawGrid } from '@/utils';\nimport {\n  canvasCurrentWidthMultiply,\n  canvasWidthMultiply,\n  defaultConfig,\n  gridWidthMultiply,\n  MAX_HEIGHT,\n} from './constants';\nconst Page: React.FC<PageProps> = (props) => {\n  const { pathname } = useLocation();\n  const defaultTitle = routes.filter((item) => {\n    return item.path === pathname;\n  })[0].name;\n  const { children, title = defaultTitle, backLine = true } = props;\n\n  const { color, stepx, stepy, lineWidth } = useMemo(() => {\n    if (typeof backLine === 'boolean') {\n      return defaultConfig;\n    } else {\n      return { ...defaultConfig, ...backLine };\n    }\n  }, [backLine]);\n\n  const canvas = useRef<HTMLCanvasElement>(null);\n  const page = useRef<HTMLDivElement>(null);\n  const canvasWrapper = useRef<HTMLDivElement>(null);\n  const timer = useRef();\n  useEffect(() => {\n    let resizeObserver: ResizeObserver;\n    if (page.current && backLine) {\n      resizeObserver = new ResizeObserver(() => {\n        if (timer.current) {\n          clearTimeout(timer.current);\n        }\n        setTimeout(() => {\n          if (canvas.current && canvasWrapper.current && page.current) {\n            // 动态设置canvas高度\n            const { clientHeight, clientWidth } = page.current;\n            if (clientHeight > MAX_HEIGHT) return;\n            // 取多倍作用：不需要监听页面 resize\n            canvasWrapper.current.style.height = `${clientHeight}px`;\n            canvas.current.style.width = `${clientWidth * canvasCurrentWidthMultiply}px`;\n            canvas.current.style.height = `${clientHeight * canvasCurrentWidthMultiply}px`;\n            canvas.current.width = clientWidth * canvasWidthMultiply;\n            canvas.current.height = clientHeight * canvasWidthMultiply;\n            drawGrid({\n              canvas: canvas.current,\n              color,\n              stepx: stepx * gridWidthMultiply,\n              stepy: stepy * gridWidthMultiply,\n              lineWidth,\n            });\n          }\n        }, 500);\n      });\n      resizeObserver.observe(page.current);\n    }\n    return () => {\n      resizeObserver?.disconnect?.();\n    };\n  }, [canvas, page, backLine, canvasWrapper]);\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.page} ref={page}>\n        {/* background  line */}\n        {backLine && (\n          <div ref={canvasWrapper} className={styles['canvas-wrapper']}>\n            <canvas ref={canvas} className={styles.canvas} />\n          </div>\n        )}\n        {/* content */}\n        <div className={styles['page-content']}>\n          <h2 className={styles.title}>{title}</h2>\n          <div className={styles.content}>{children}</div>\n          <div className={styles.footer} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport { Page };\nexport * from './types';\n","import { scrollIntoView } from '@/utils';\nimport React from 'react';\n\n/**\n * 锚点\n * @param to 锚点对应的id名\n */\nconst AnchorPoint: React.FC<{ to: string; children: any }> = (props) => {\n  const { to, children } = props;\n\n  const goAction = () => {\n    const point = document.getElementById(to);\n    if (point) {\n      scrollIntoView(point);\n    } else {\n      console.warn(`找不到 “${to}” 相关锚点`);\n    }\n    window.location.hash = to;\n  };\n  return <div onClick={goAction}>{children}</div>;\n};\n\nexport { AnchorPoint };\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport styles from './index.less';\nimport { CodeViewerProps } from './types';\n\nconst CodeViewer = (props: CodeViewerProps) => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n  const { render, code } = props;\n  return (\n    <div className={styles['code-viewer']}>\n      <div className={styles['code-viewer__render']}>\n        {render}\n        <span\n          className={classNames(styles['code-viewer__show-btn'], { [styles['code-viewer__show-btn-open']]: isOpen })}\n          onClick={() => setIsOpen((prev) => !prev)}\n        >\n          {isOpen ? '关闭代码' : '展开代码'}\n        </span>\n      </div>\n      <div className={classNames(styles['code-viewer__code'], { [styles['code-viewer__code-open']]: isOpen })}>\n        {code}\n      </div>\n    </div>\n  );\n};\n\nexport { CodeViewer };\n","// 匹配 ``` ```之间的内容 @ safair不支持\n// export const reg = /(?<=```)([\\w\\W]*?)(?=```)/;\n\nexport const reg = /^[\\w\\W]*?```([\\w\\W]*?)```[\\w\\W]*$/;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport classnames from 'classnames';\nimport marked from 'marked';\nimport hljs from 'highlight.js';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport { MarkedProps } from './types';\nimport styles from './index.less';\nimport { reg } from './constants';\n\n/**\n * 字符串代码--->代码库\n */\nconst Marked = (props: MarkedProps) => {\n  const { children, type, className, style = {}, onCopy } = props;\n  const [code, setCode] = useState<string>('');\n  const [markContent, setMarkContent] = useState<string>('');\n  const [copyText, setCopyText] = useState('复制');\n  useEffect(() => {\n    if (children) {\n      setCode(children.match(reg)?.[1] || '');\n      marked.setOptions({\n        renderer: new marked.Renderer(),\n        highlight: function (code) {\n          return (\n            '<pre class=\"hljs\"><code>' + hljs.highlightAuto(code, type ? [type] : undefined).value + '</code></pre>'\n          );\n        },\n        pedantic: false,\n        gfm: true,\n        breaks: false,\n        sanitize: false,\n        smartLists: true,\n        smartypants: false,\n        xhtml: false,\n      });\n      const markedContentd = marked(children);\n      setMarkContent(markedContentd);\n    }\n  }, [children, type]);\n\n  const copyAction = useCallback((text: string, result: boolean) => {\n    // 拷贝成功交互\n    setCopyText('已复制');\n    setTimeout(() => {\n      setCopyText('复制');\n    }, 2000);\n    if (onCopy) {\n      onCopy(text, result);\n    }\n  }, []);\n\n  return (\n    <div className={classnames(styles.marked, { className })} style={style}>\n      <div className={classnames(styles['marked-content'])}>\n        {markContent && <div dangerouslySetInnerHTML={{ __html: markContent }} />}\n        {/* @ts-ignore */}\n        <CopyToClipboard text={code} onCopy={copyAction}>\n          <span className={styles['marked-content__copy']}>{copyText}</span>\n        </CopyToClipboard>\n      </div>\n    </div>\n  );\n};\n\nexport { Marked };\n","export * from './Block';\nexport * from './Page';\nexport * from './Title';\nexport * from './AnchorPoint';\nexport * from './CodeViewer';\nexport * from './Marked';\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block__content\":\"block__content__2GD6O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ellipsis\":\"ellipsis__322Eq\",\"title\":\"title__2ZSyt\",\"icon\":\"icon__3vdW5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ellipsis\":\"ellipsis__2Uc9l\",\"wrapper\":\"wrapper__3y9jD\",\"page\":\"page__1k_bh\",\"canvas-wrapper\":\"canvas-wrapper__2oIr1\",\"canvas\":\"canvas__1HL9K\",\"page-content\":\"page-content__1cWrh\",\"title\":\"title__2iGTa\",\"content\":\"content__5eCjz\",\"footer\":\"footer__St2N1\"};","// 绘画宽度倍率\nexport const canvasWidthMultiply = 2;\n// step倍率\nexport const gridWidthMultiply = 2;\n// canvas css宽度倍率\nexport const canvasCurrentWidthMultiply = canvasWidthMultiply / gridWidthMultiply;\n\n// 线条默认配置\nexport const defaultConfig = {\n  color: 'red',\n  stepx: 20,\n  stepy: 20,\n  lineWidth: 0.15,\n};\n\n// 最大内容高度限制\nexport const MAX_HEIGHT = 8000;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ellipsis\":\"ellipsis__1ZCmY\",\"code-viewer\":\"code-viewer__2677u\",\"code-viewer__render\":\"code-viewer__render__1ViX4\",\"code-viewer__show-btn\":\"code-viewer__show-btn__G5BQv\",\"code-viewer__show-btn-open\":\"code-viewer__show-btn-open__3P1mA\",\"code-viewer__code\":\"code-viewer__code__3eHnO\",\"code-viewer__code-open\":\"code-viewer__code-open__1lUmt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ellipsis\":\"ellipsis__26Fs5\",\"marked-content\":\"marked-content__3cowg\",\"marked-content__copy\":\"marked-content__copy__K55yV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"virtual-list-wrapper\":\"virtual-list-wrapper__2_yEZ\",\"virtual-list-phantom\":\"virtual-list-phantom__28vnd\",\"virtual-list\":\"virtual-list__3-Cdz\",\"virtual-list-item\":\"virtual-list-item__zfGx2\",\"virtual-list-item__avatar\":\"virtual-list-item__avatar__3Gux7\",\"virtual-list-item__content\":\"virtual-list-item__content__F8Fyt\",\"virtual-list-item__title\":\"virtual-list-item__title__2XtSX\"};"],"sourceRoot":""}