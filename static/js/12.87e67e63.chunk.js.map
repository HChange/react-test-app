{"version":3,"sources":["pages/json-download/index.tsx"],"names":["JsonDownload","onClick","xhr","XMLHttpRequest","open","Date","getTime","setRequestHeader","responseType","onload","this","status","blob","response","eleLink","document","createElement","download","style","display","href","URL","createObjectURL","body","appendChild","click","removeChild","send","memo"],"mappings":"yHAAA,kCAIMA,EAAe,WA0CnB,OACE,cAAC,OAAD,UACE,wBAAQC,QA3CK,WACf,IACIC,EAAM,IAAIC,eACdD,EAAIE,KAAK,MAAT,UAFY,yDAEZ,uBAAoC,IAAIC,MAAOC,YAAa,GAC5DJ,EAAIK,iBAAiB,eAAgB,oBACrCL,EAAIK,iBAAiB,gBAAiB,YAGtCL,EAAIM,aAAe,OAEnBN,EAAIO,OAAS,WACX,GAAoB,MAAhBC,KAAKC,OAAgB,CACvB,IAAMC,EAAOF,KAAKG,SAEdC,EAAUC,SAASC,cAAc,KACrCF,EAAQG,SAAW,YACnBH,EAAQI,MAAMC,QAAU,OAExBL,EAAQM,KAAOC,IAAIC,gBAAgBV,GAEnCG,SAASQ,KAAKC,YAAYV,GAC1BA,EAAQW,QAERV,SAASQ,KAAKG,YAAYZ,KAgB9BZ,EAAIyB,QAIF,6BAKSC,yBAAK5B","file":"static/js/12.87e67e63.chunk.js","sourcesContent":["/* eslint-disable react/no-this-in-sfc */\nimport { Page } from '@/components';\nimport React, { memo } from 'react';\n\nconst JsonDownload = () => {\n  const download = () => {\n    const url = 'https://www.static.hellochange.cn/test/json/asset.json';\n    let xhr = new XMLHttpRequest();\n    xhr.open('GET', `${url}?timestamp=${new Date().getTime()}`, true);\n    xhr.setRequestHeader('Content-type', 'application/json');\n    xhr.setRequestHeader('Cache-Control', 'no-cache');\n\n    // 响应类型\n    xhr.responseType = 'blob';\n    // 监听onload事件\n    xhr.onload = function () {\n      if (this.status === 200) {\n        const blob = this.response;\n\n        let eleLink = document.createElement('a');\n        eleLink.download = 'data.json';\n        eleLink.style.display = 'none';\n\n        eleLink.href = URL.createObjectURL(blob);\n        // 触发点击\n        document.body.appendChild(eleLink);\n        eleLink.click();\n        // 然后移除\n        document.body.removeChild(eleLink);\n\n        /** 方法二 */\n        // const reader = new FileReader();\n        // // blob ==> base64\n        // reader.readAsDataURL(blob);\n        // reader.onload = function (e) {\n        //   const a = document.createElement('a');\n        //   a.download = 'test.json';\n        //   a.href = e.target?.result as string;\n        //   a.click();\n        //   a.remove();\n        // };\n      }\n    };\n    // 发送请求\n    xhr.send();\n  };\n  return (\n    <Page>\n      <button onClick={download}>下载</button>\n    </Page>\n  );\n};\n\nexport default memo(JsonDownload);\n"],"sourceRoot":""}