(this["webpackJsonpreact-test-app"]=this["webpackJsonpreact-test-app"]||[]).push([[7],{406:function(t,e,i){"use strict";i.r(e);var a=i(14),l=i(124),s=i(0),r=i(678),c=i.n(r),n=new Array(1e3).fill(!0).map((function(t,e){return{id:e,avatar:"https://www.static.hellochange.cn/images/white_bear.gif",title:e,content:e}})),u=i(3);e.default=function(){var t=Object(s.useState)([]),e=Object(a.a)(t,2),i=e[0],r=e[1],v=Object(s.useState)(0),o=Object(a.a)(v,2),_=o[0],j=o[1],m=Object(s.useState)(0),b=Object(a.a)(m,2),f=b[0],h=b[1],O=Object(s.useState)(0),d=Object(a.a)(O,2),p=d[0],x=d[1],g=Object(s.useRef)(null),w=Object(s.useRef)(null),N=Object(s.useMemo)((function(){return Math.ceil(_/50)}),[_]),M=p+N,E=Object(s.useMemo)((function(){return 50*i.length}),[i]),y=Object(s.useMemo)((function(){return i.slice(p,Math.min(M,i.length))}),[i,p,M]);Object(s.useEffect)((function(){r(n.slice(0,N))}),[N]),Object(s.useEffect)((function(){var t=g.current;t&&j(t.clientHeight)}),[]);var S=Object(s.useCallback)((function(){var t,e,a=null!==(t=null===(e=g.current)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0,l=Math.floor(a/50),s=l+N;x(l),s>=i.length&&r(n.slice(0,s+N)),h(a)}),[i,N]);return Object(s.useEffect)((function(){var t=g.current;return S(),t&&t.addEventListener("scroll",S),function(){t&&t.removeEventListener("scroll",S)}}),[S]),Object(u.jsx)(l.Page,{children:Object(u.jsxs)("div",{className:c.a["virtual-list-wrapper"],ref:g,children:[Object(u.jsx)("div",{className:c.a["virtual-list-phantom"],style:{height:Math.max(E,_+1)}}),Object(u.jsx)("div",{className:c.a["virtual-list"],ref:w,style:{transform:"translateY(".concat(f,"px)")},children:y.map((function(t){var e=t.id,i=t.title,a=t.avatar,l=t.content;return Object(u.jsxs)("div",{className:c.a["virtual-list-item"],children:[Object(u.jsx)("img",{className:c.a["virtual-list-item__avatar"],src:a,alt:""}),Object(u.jsxs)("div",{className:c.a["virtual-list-item__content"],children:[Object(u.jsx)("h3",{className:c.a["virtual-list-item__title"],children:i}),Object(u.jsx)("div",{className:c.a["virtual-list-item__desc"],children:l})]})]},e)}))})]})})}},678:function(t,e,i){t.exports={"virtual-list-wrapper":"virtual-list-wrapper__2_yEZ","virtual-list-phantom":"virtual-list-phantom__28vnd","virtual-list":"virtual-list__3-Cdz","virtual-list-item":"virtual-list-item__zfGx2","virtual-list-item__avatar":"virtual-list-item__avatar__3Gux7","virtual-list-item__content":"virtual-list-item__content__F8Fyt","virtual-list-item__title":"virtual-list-item__title__2XtSX"}}}]);
//# sourceMappingURL=7.eaae7ddb.chunk.js.map